<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Basic address book and slots assignments algorithm."><title>smoldot::network::basic_peering_strategy - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-5bc39a1768837dd0.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="smoldot" data-themes="" data-resource-suffix="" data-rustdoc-version="1.77.1 (7cf61ebde 2024-03-27)" data-channel="1.77.1" data-search-js="search-dd67cee4cfa65049.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../../static.files/storage-4c98445ec4002617.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../static.files/main-48f368f3872407c8.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-04d5337699b92874.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../smoldot/index.html">smoldot</a><span class="version">0.17.0</span></h2></div><h2 class="location"><a href="#">Module basic_peering_strategy</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li></ul></section><h2><a href="../index.html">In smoldot::network</a></h2></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../../../smoldot/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../../../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../../index.html">smoldot</a>::<wbr><a href="../index.html">network</a>::<wbr><a class="mod" href="#">basic_peering_strategy</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../../src/smoldot/network/basic_peering_strategy.rs.html#18-1143">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Basic address book and slots assignments algorithm.</p>
<p>The <a href="struct.BasicPeeringStrategy.html" title="struct smoldot::network::basic_peering_strategy::BasicPeeringStrategy"><code>BasicPeeringStrategy</code></a> contains a collection of network identities, identified by
a <a href="../../libp2p/peer_id/struct.PeerId.html" title="struct smoldot::libp2p::peer_id::PeerId"><code>PeerId</code></a>. Each network identity is associated to one or more chains, identified by a
<code>TChainId</code>.</p>
<p>Each network-identity-chain association can be in one of these three states:</p>
<ul>
<li>Normal.</li>
<li>Banned until a certain instant represented by <code>TInstant</code>.</li>
<li>Has a slot.</li>
</ul>
<p>“Normal” and “banned” network-identity-chain associations represent the potential peers to
connect to, while “slot” represent pending or established gossip slots.</p>
<p>Use <a href="struct.BasicPeeringStrategy.html#method.pick_assignable_peer" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::pick_assignable_peer"><code>BasicPeeringStrategy::pick_assignable_peer</code></a> in order to assign a slot to a
randomly-chosen network-identity that doesn’t currently have one.</p>
<p>If a gossip slot fails to be established with a certain peer, or if the peer misbehaves,
use <a href="struct.BasicPeeringStrategy.html#method.unassign_slot_and_ban" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::unassign_slot_and_ban"><code>BasicPeeringStrategy::unassign_slot_and_ban</code></a> to ban the peer, preventing it from
obtaining a slot for a certain amount of time.</p>
<p>Each network identity that is associated with at least one chain is associated with zero or
more addresses. It is not possible to insert addresses to peers that aren’t associated to at
least one chain. The number of active connections of each address is also tracked.</p>
<p>There exists a limit to the number of peers per chain and the number of addresses per peer,
guaranteeing that the data structure only uses a bounded amount of memory. If these limits
are reached, peers and addresses are removed randomly. Peers that have a slot and at least one
connected address are never removed.</p>
</div></details><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.PeerId"><code>pub use crate::libp2p::<a class="struct" href="../../libp2p/peer_id/struct.PeerId.html" title="struct smoldot::libp2p::peer_id::PeerId">PeerId</a>;</code></div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.BasicPeeringStrategy.html" title="struct smoldot::network::basic_peering_strategy::BasicPeeringStrategy">BasicPeeringStrategy</a></div></li><li><div class="item-name"><a class="struct" href="struct.Config.html" title="struct smoldot::network::basic_peering_strategy::Config">Config</a></div><div class="desc docblock-short">Configuration passed to <a href="struct.BasicPeeringStrategy.html#method.new" title="associated function smoldot::network::basic_peering_strategy::BasicPeeringStrategy::new"><code>BasicPeeringStrategy::new</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.UnassignSlotsAndBanIter.html" title="struct smoldot::network::basic_peering_strategy::UnassignSlotsAndBanIter">UnassignSlotsAndBanIter</a></div><div class="desc docblock-short">See <a href="struct.BasicPeeringStrategy.html#method.unassign_slots_and_ban" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::unassign_slots_and_ban"><code>BasicPeeringStrategy::unassign_slots_and_ban</code></a>.</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.AssignablePeer.html" title="enum smoldot::network::basic_peering_strategy::AssignablePeer">AssignablePeer</a></div><div class="desc docblock-short">See <a href="struct.BasicPeeringStrategy.html#method.pick_assignable_peer" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::pick_assignable_peer"><code>BasicPeeringStrategy::pick_assignable_peer</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.DecreaseAddressConnectionsError.html" title="enum smoldot::network::basic_peering_strategy::DecreaseAddressConnectionsError">DecreaseAddressConnectionsError</a></div><div class="desc docblock-short">See <a href="struct.BasicPeeringStrategy.html#method.decrease_address_connections" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::decrease_address_connections"><code>BasicPeeringStrategy::decrease_address_connections</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.InsertAddressConnectionsResult.html" title="enum smoldot::network::basic_peering_strategy::InsertAddressConnectionsResult">InsertAddressConnectionsResult</a></div><div class="desc docblock-short">See <a href="struct.BasicPeeringStrategy.html#method.increase_address_connections" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::increase_address_connections"><code>BasicPeeringStrategy::increase_address_connections</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.InsertAddressResult.html" title="enum smoldot::network::basic_peering_strategy::InsertAddressResult">InsertAddressResult</a></div><div class="desc docblock-short">See <a href="struct.BasicPeeringStrategy.html#method.insert_address" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::insert_address"><code>BasicPeeringStrategy::insert_address</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.InsertChainPeerResult.html" title="enum smoldot::network::basic_peering_strategy::InsertChainPeerResult">InsertChainPeerResult</a></div><div class="desc docblock-short">See <a href="struct.BasicPeeringStrategy.html#method.insert_chain_peer" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::insert_chain_peer"><code>BasicPeeringStrategy::insert_chain_peer</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.UnassignSlotAndBan.html" title="enum smoldot::network::basic_peering_strategy::UnassignSlotAndBan">UnassignSlotAndBan</a></div><div class="desc docblock-short">See <a href="struct.BasicPeeringStrategy.html#method.unassign_slot_and_ban" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::unassign_slot_and_ban"><code>BasicPeeringStrategy::unassign_slot_and_ban</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.UnassignSlotAndRemoveChainPeer.html" title="enum smoldot::network::basic_peering_strategy::UnassignSlotAndRemoveChainPeer">UnassignSlotAndRemoveChainPeer</a></div><div class="desc docblock-short">See <a href="struct.BasicPeeringStrategy.html#method.unassign_slot_and_remove_chain_peer" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::unassign_slot_and_remove_chain_peer"><code>BasicPeeringStrategy::unassign_slot_and_remove_chain_peer</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.UnassignSlotsAndBan.html" title="enum smoldot::network::basic_peering_strategy::UnassignSlotsAndBan">UnassignSlotsAndBan</a></div><div class="desc docblock-short">See <a href="struct.BasicPeeringStrategy.html#method.unassign_slots_and_ban" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::unassign_slots_and_ban"><code>BasicPeeringStrategy::unassign_slots_and_ban</code></a>.</div></li></ul></section></div></main></body></html>